import{_ as a,c as n,o as s,b as e}from"./app-BrWBrMkU.js";const t={},i=e(`<h1 id="work-with-database" tabindex="-1"><a class="header-anchor" href="#work-with-database"><span>Work with database</span></a></h1><h2 id="table-of-contents" tabindex="-1"><a class="header-anchor" href="#table-of-contents"><span>Table of Contents</span></a></h2><ul><li><a href="#working-with-database-entity-typeorm">Working with database entity (TypeORM)</a><ul><li><a href="#generate-migration">Generate migration</a></li><li><a href="#show-migration">Show migration</a></li><li><a href="#run-migration">Run migration</a></li><li><a href="#revert-migration">Revert migration</a></li></ul></li></ul><h2 id="working-with-database-entity-typeorm" tabindex="-1"><a class="header-anchor" href="#working-with-database-entity-typeorm"><span>Working with database entity (TypeORM)</span></a></h2><h3 id="generate-migration" tabindex="-1"><a class="header-anchor" href="#generate-migration"><span>Generate migration</span></a></h3><ol><li><p>Create entity file with extension <code>.entity.ts</code>. For example <code>post.entity.ts</code>:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token comment">// /src/api/post/entities/post.entity.ts</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Column<span class="token punctuation">,</span> Entity<span class="token punctuation">,</span> PrimaryGeneratedColumn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;typeorm&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entity</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PostEntity</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">PrimaryGeneratedColumn</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Column</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Column</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// Here any fields that you need</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Next, generate migration file:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">pnpm</span> run migration:generate src/database/migrations/create-post-table</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Apply this migration to database via <a href="#run-migration">pnpm migration:up</a>.</p></li></ol><h3 id="show-migration" tabindex="-1"><a class="header-anchor" href="#show-migration"><span>Show migration</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">pnpm</span> migration:show</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="run-migration" tabindex="-1"><a class="header-anchor" href="#run-migration"><span>Run migration</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">pnpm</span> migration:up</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="revert-migration" tabindex="-1"><a class="header-anchor" href="#revert-migration"><span>Revert migration</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">pnpm</span> migration:down</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,12),l=[i];function r(o,p){return s(),n("div",null,l)}const d=a(t,[["render",r],["__file","database.html.vue"]]),u=JSON.parse('{"path":"/database.html","title":"Work with database","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Table of Contents","slug":"table-of-contents","link":"#table-of-contents","children":[]},{"level":2,"title":"Working with database entity (TypeORM)","slug":"working-with-database-entity-typeorm","link":"#working-with-database-entity-typeorm","children":[{"level":3,"title":"Generate migration","slug":"generate-migration","link":"#generate-migration","children":[]},{"level":3,"title":"Show migration","slug":"show-migration","link":"#show-migration","children":[]},{"level":3,"title":"Run migration","slug":"run-migration","link":"#run-migration","children":[]},{"level":3,"title":"Revert migration","slug":"revert-migration","link":"#revert-migration","children":[]}]}],"git":{"updatedTime":1718537992000,"contributors":[{"name":"Lam Ngoc Khuong","email":"49505176+khuongln-1346@users.noreply.github.com","commits":1}]},"filePathRelative":"database.md"}');export{d as comp,u as data};
